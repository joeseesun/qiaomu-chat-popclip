# 乔木AI助手 PopClip 扩展

多功能AI助手，提供智能对话、文本扩写、翻译转换、内容解释等功能。

## 🎯 推荐使用

### ⭐ 推荐版本：QiaoMuAI-CN.popclipext

**🚀 一键安装，开箱即用**：
- 下载 `QiaoMuAI-CN.popclipext` 文件夹
- 双击安装到PopClip
- 配置API密钥即可使用

**🌐 全API支持**：
- 支持火山引擎API（豆包模型）
- 支持DeepSeek API（DeepSeek V3）
- 支持兔子API（Claude 4, GPT-4o等）
- 支持OpenRouter API（聚合多家模型）
- 兼容所有OpenAI格式API

**🎨 自定义功能**：
- 支持自定义Prompt（通过修改扩写、翻译、解释的提示词实现）
- 四大功能独立控制开关
- 灵活的响应模式配置
- 注：无法修改图标，如需自定义图标请下载源码修改

### 🛠️ 开发者选项

**源码定制**：
- 下载完整源码
- 使用Claude Code或Cursor进行修改
- 完全自定义功能和界面
- 适合有开发需求的用户

## 🌟 功能特点

### 🎯 多功能AI工具
- **智能对话** - 支持持续对话和上下文记忆
- **文本扩写** - 将简短文本扩展为详细内容
- **翻译转换** - 智能中英文互译
- **内容解释** - 详细解释复杂内容

### 🌐 多服务商支持
- **可配置API基础地址** - 兼容任何OpenAI格式的API
- **默认支持TuZi API** - `https://api.tu-zi.com/v1` - [点击注册](https://api.tu-zi.com/register?aff=yyaz)
- **兼容其他服务商**：
  - DeepSeek: `https://api.deepseek.com/v1`
  - OpenAI: `https://api.openai.com/v1`
  - 火山引擎：`https://ark.cn-beijing.volces.com/api/v3/`
  - 其他兼容OpenAI格式的API服务

### 🤖 多模型支持
- **自定义模型** - 支持输入任意模型名称，优先级最高
- **Claude 4**（推荐）- 最新最强大的模型
- **Claude 3 系列** - Haiku, Opus
- **GPT-4o 系列** - Mini, 标准版, All
- **O3 Mini** - OpenAI最新模型
- **Gemini 2.5 Pro** - Google最新模型
- **DeepSeek V3** - 国产优秀模型

### ⚙️ 灵活配置
- **功能选择** - 可选择启用哪些功能按钮
- **自定义提示词** - 每个功能独立的提示词设置框
- **响应模式** - 复制、追加、替换三种模式
- **修饰键支持** - Shift/Option快速切换模式
- **超时控制** - 可配置超时时间，智能重试机制

## 📦 安装方法

1. **下载插件**
   ```bash
   # 克隆或下载此仓库
   git clone [repository-url]
   ```

2. **安装插件**
   - 双击 `QiaoMuAI-CN.popclipext` 文件夹
   - PopClip会自动识别并安装插件

3. **配置API**
   - 在PopClip设置中找到"乔木AI助手"
   - 配置API基础地址（默认为TuZi API）
   - 输入对应服务的API密钥
   - 选择默认使用的AI模型
   - **🎯 推荐使用TuZi API**：[点击注册](https://api.tu-zi.com/register?aff=yyaz) - 新用户免费额度

## 🚀 使用方法

### 基础操作
1. **选择文本** - 在任何应用中选择要处理的文本
2. **选择功能** - 在PopClip弹出菜单中点击对应功能图标
3. **获取结果** - AI会根据功能处理文本并返回结果

### 🎯 功能组合使用示例

#### 场景1：写作助手组合（推荐）
- **启用**：智能对话 + 文本扩写
- **用途**：写作时可以快速扩展大纲，也能随时与AI讨论内容
- **适合**：文章写作、创意写作、学术写作

#### 场景2：翻译专家组合
- **启用**：翻译转换 + 智能对话
- **用途**：翻译文档时遇到问题可以直接咨询AI
- **适合**：文档翻译、学习外语、国际交流

#### 场景3：学习助手组合
- **启用**：内容解释 + 智能对话
- **用途**：遇到难懂概念先解释，再深入讨论
- **适合**：学习新知识、阅读专业文献

#### 场景4：全能助手组合
- **启用**：全部功能
- **用途**：处理各种文本任务，功能齐全
- **适合**：重度用户、多样化需求

### 四大功能

#### 💬 智能对话
- **功能**：支持持续对话，保持上下文记忆
- **适用场景**：问答、讨论、创意思考
- **特点**：对话历史会自动保存，支持多轮对话

#### 📝 文本扩写
- **功能**：将简短文本扩展为详细丰富的内容
- **适用场景**：文章写作、内容创作、大纲扩展
- **特点**：保持原意，增加细节和深度

#### 🌐 翻译转换
- **功能**：智能中英文互译
- **适用场景**：文档翻译、学习辅助、国际交流
- **特点**：自动识别语言，保持原意和语调

#### 💡 内容解释
- **功能**：详细解释复杂内容
- **适用场景**：学习理解、知识科普、概念解析
- **特点**：用简单易懂的语言解释复杂概念

### 响应模式
- **普通点击**：根据设置的默认模式处理
- **Shift + 点击**：强制复制到剪贴板
- **Option + 点击**：替换选中文本

## ⚙️ 配置选项

### 基础设置
- **API基础地址**：配置AI服务的基础URL
- **API密钥**：你的API密钥
- **自定义模型名称**：输入自定义模型名（可选，优先级最高）
- **AI模型**：选择默认使用的AI模型
- **请求超时时间**：15秒（快速）、20秒（标准）、30秒（稳定）、40秒（耐心）、60秒（推荐）、120秒（长文本）、240秒（复杂任务）、360秒（超长任务）
- **最大生成Token数**：512（简短）、1024（标准）、2048（详细）、4096（完整）、8192（丰富）、16K（长文本）、64K（超长文本）、128K（文档级）、200K（书籍级）
- **响应模式**：设置默认的文本处理方式

### 功能设置
- **启用智能对话**：控制是否显示智能对话功能按钮（默认开启）
- **启用文本扩写**：控制是否显示文本扩写功能按钮（默认开启）
- **启用翻译转换**：控制是否显示翻译转换功能按钮（默认关闭）
- **启用内容解释**：控制是否显示内容解释功能按钮（默认关闭）

💡 **多功能组合使用**：
- 可以同时启用多个功能，比如只开启"智能对话"和"文本扩写"
- 每个功能都有独立的开关，灵活组合使用
- 建议根据个人使用习惯选择常用功能，避免图标过多

### 高级设置
- **自定义提示词**：JSON格式的自定义提示词
  ```json
  {
    "expand": "请将以下文本进行创意扩写",
    "translate": "请翻译成专业术语",
    "explain": "请用小学生能理解的语言解释"
  }
  ```

## 🔧 支持的服务商

### TuZi API（默认推荐）
- **基础地址**：`https://api.tu-zi.com/v1`
- **支持模型**：Claude 4, Claude 3系列, GPT-4o系列等
- **🎯 注册地址**：[点击注册TuZi API](https://api.tu-zi.com/register?aff=yyaz) - 新用户免费额度

### DeepSeek API
- **基础地址**：`https://api.deepseek.com/v1`
- **支持模型**：DeepSeek V3, DeepSeek Chat等
- **获取API密钥**：[DeepSeek官网](https://platform.deepseek.com/)

### OpenAI API
- **基础地址**：`https://api.openai.com/v1`
- **支持模型**：GPT-4o, GPT-4o Mini, O3 Mini等
- **获取API密钥**：[OpenAI官网](https://platform.openai.com/)

### 火山引擎API
- **基础地址**：`https://ark.cn-beijing.volces.com/api/v3/`
- **支持模型**：豆包系列模型等
- **获取API密钥**：[火山引擎官网](https://console.volcengine.com/)

### Google Gemini API
- **基础地址**：`https://generativelanguage.googleapis.com/v1beta`
- **支持模型**：Gemini 2.5 Pro, Gemini 1.5 Pro等
- **获取API密钥**：[Google AI Studio](https://aistudio.google.com/)

### OpenRouter API
- **基础地址**：`https://openrouter.ai/api/v1/`
- **支持模型**：聚合多家AI模型，包括Claude、GPT、Gemini等
- **获取API密钥**：[OpenRouter官网](https://openrouter.ai/)
- **特点**：一个API密钥访问多家AI模型，支持按需付费

## 🛠️ 故障排除

### 常见问题

1. **某个功能按钮不显示**
   - 检查对应功能的开关是否已启用（如"启用智能对话"）
   - 确认插件安装完整
   - 重新安装插件试试

2. **API请求失败**
   - 验证API密钥是否有效
   - 检查API配额是否充足
   - 确认基础地址格式正确

3. **自定义提示词不生效**
   - 检查JSON格式是否正确
   - 确认功能名称拼写正确（expand, translate, explain, chat）

4. **对话历史丢失**
   - 对话历史会在PopClip重启后清空
   - 这是正常行为，保护隐私

## 📋 技术规格

- **PopClip版本**：4151+
- **网络权限**：需要网络访问权限
- **API兼容性**：支持OpenAI API格式
- **支持系统**：macOS 10.14+

## 🚀 性能优化

### 超时控制
- **可配置超时**：根据网络情况选择合适的超时时间
- **智能重试**：15秒以上超时自动重试一次
- **快速失败**：短超时时间快速反馈，提高效率

### 错误处理
- **友好提示**：区分不同错误类型，提供具体解决建议
- **响应时间**：显示实际用时，帮助优化使用体验
- **重试进度**：重试时显示进度提示

## 🔄 更新日志

### v3.0.6
- ⏰ 超时时间扩展：新增120秒、240秒、360秒长时间选项，默认调整为60秒
- 🚀 超大Token支持：新增16K、64K、128K、200K四个超大Token档位
- 📊 适应复杂任务：支持长文本生成、文档级处理、书籍级内容创作
- 🎯 优化默认配置：超时60秒、Token数2048，平衡效率和质量

### v3.0.5
- 🎛️ 新增最大Token数配置：支持512、1024、2048、4096、8192五个档位
- 📊 模型Token限制优化：基于各主流模型的实际Token限制进行优化
- 🔧 智能默认值：默认2048 tokens，平衡回复质量和成本
- 📝 配置说明完善：详细说明各Token数档位的适用场景

### v3.0.4
- ⚡ 超时优化：添加可配置超时时间（15-60秒）和智能重试机制
- 🔧 错误处理：优化错误提示，显示具体错误原因和解决建议
- 📊 性能统计：显示实际响应时间，帮助用户了解模型性能
- 🚀 代码优化：增大max_tokens到2000，提供更完整的回复
- 📝 技术改进：删除不支持的shared-utils.js，每个文件独立完整

### v3.0.3
- 🎯 简化自定义提示词配置：改为4个独立的简单文本框，用户更容易使用
- 📝 优化设置界面：去除复杂的JSON格式，每个功能都有独立的提示词设置
- 🔧 简化描述文本：减少界面空间占用，提升用户体验
- 💡 支持留空使用默认提示词，也可以自定义个性化提示词

### v3.0.2
- ✨ 优化功能选择控制：改为独立的布尔开关，支持任意组合
- 🎛️ 每个功能都有独立开关：启用智能对话、启用文本扩写、启用翻译转换、启用内容解释
- 🎯 默认配置优化：智能对话和文本扩写默认开启，翻译和解释默认关闭
- 💡 支持多功能组合：可以同时开启多个功能，如chat+expand组合使用
- 📝 完善配置说明和使用指南

### v3.0.1
- ✨ 新增功能选择控制：现在可以通过"启用功能"选项控制哪些图标显示
- 🎛️ 支持单独启用/禁用智能对话、文本扩写、翻译转换、内容解释功能
- 🎯 优化用户体验：只显示用户需要的功能按钮
- 📝 完善配置文档说明

### v3.0.0
- 🆕 全新多功能设计：对话、扩写、翻译、解释
- 🆕 模块化架构，共享工具函数
- 🆕 自定义提示词支持
- 🆕 功能选择配置
- 🎨 专用功能图标设计
- 📝 完整的中文文档

## 📄 许可证

本项目遵循MIT许可证。

## 👨‍💻 关于作者

### 🔥 关注公众号
获取更多AI工具和技术分享

![向阳乔木推荐看](https://newimg.t5t6.com/1751870053371-c2bf9308-2e52-4a15-81b4-6c7490b551cf.jpg)

**向阳乔木推荐看** - 专注AI工具分享与技术交流

### ☕ 支持作者
如果这个工具对您有帮助，欢迎打赏支持！

![打赏二维码](https://newimg.t5t6.com/1751870053373-97dc7339-5191-4dde-b891-bf4fb4fe8118.png)

您的支持是我持续开发和优化工具的动力！

## 💬 联系方式

- **微信**: vista8
- **X (Twitter)**: vista8  
- **公众号**: 向阳乔木推荐看
- **GitHub**: 欢迎提交Issue和PR

如有问题或建议，请通过以上方式联系或提交Issue。 